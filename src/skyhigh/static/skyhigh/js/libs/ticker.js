(function(a){function c(a,b){var f=a.data("settings");b===void 0&&(b=!1),b&&e(a);var g=d(a);a.animate(g.css,g.time,"linear",function(){a.css(f.direction,"0"),c(a,!0)})}function d(a){var b=a.data("settings"),c=a.children().first(),d=Math.abs(-a.css(b.direction).replace("px","").replace("auto","0")-c.outerWidth(!0)),b=a.data("settings"),e=1e3*d/b.speed,f={};return f[b.direction]=a.css(b.direction).replace("px","").replace("auto","0")-d,{css:f,time:e}}function e(a){var b=a.data("settings");a.addClass("no-transition").css("transition-duration","0s").css(b.direction,"0");var c=a.children().first();c.hasClass("webticker-init")?c.remove():a.children().last().after(c)}function f(a,b){b===void 0&&(b=!1),b&&e(a);var c=d(a),f=c.time/1e3;f+="s",a.css(c.css).css("transition-duration",f)}function g(b,c,d){var e;a.get(b,function(b){var f=a(b);f.find("item").each(function(){var b=a(this),c={title:b.find("title").text(),link:b.find("link").text()};listItem="<li><a href='"+c.link+"'>"+c.title+"</a></li>",e+=listItem}),d.webTicker("update",e,c)})}function h(b){var c=b.data("settings");b.width("auto");var d=0;if(b.children("li").each(function(){d+=a(this).outerWidth(!0)}),b.parent().width()>d||1==b.children().length)if(c.duplicate)for(itemWidth=Math.max.apply(Math,b.children().map(function(){return a(this).width()}).get());b.parent().width()>d-itemWidth||1==b.children().length;){var e=b.children().clone();b.append(e),d=0,b.children("li").each(function(){d+=a(this).outerWidth(!0)}),itemWidth=Math.max.apply(Math,b.children().map(function(){return a(this).width()}).get())}else{var f=b.parent().width()-d;f+=b.find("li:first").width();var g=b.find("li:first").height();b.append('<li class="ticker-spacer" style="width:'+f+"px;height:"+g+'px;"></li>')}if(c.startEmpty){var g=b.find("li:first").height();b.prepend('<li class="webticker-init" style="width:'+b.parent().width()+"px;height:"+g+'px;"></li>')}for(d=0,b.children("li").each(function(){d+=a(this).outerWidth(!0)}),b.width(d+200),widthCompare=0,b.children("li").each(function(){widthCompare+=a(this).outerWidth(!0)});widthCompare>=b.width();)b.width(b.width()+200),widthCompare=0,b.children("li").each(function(){widthCompare+=a(this).outerWidth(!0)})}var b=!1;(function(){var a=document.createElement("div");a.setAttribute("style","transition:top 1s linear;-webkit-transition:top 1s linear;-moz-transition:top 1s linear;-o-transition:top 1s linear;"),b=!!(a.style.transition||a.style.webkitTransition||a.style.MozTransition||a.style.OTransition),delete a})();var i={init:function(d){return d=jQuery.extend({speed:50,direction:"left",moving:!0,startEmpty:!0,duplicate:!1,rssurl:!1,hoverpause:!0,rssfrequency:0,updatetype:"reset"},d),this.each(function(){jQuery(this).data("settings",d);var e=jQuery(this);e.addClass("newsticker");var i=e.wrap("<div class='mask'></div>");i.after("<span class='tickeroverlay-left'>&nbsp;</span><span class='tickeroverlay-right'>&nbsp;</span>"),e.parent().wrap("<div class='tickercontainer'></div>"),h(e),d.rssurl&&(g(d.rssurl,d.type,e),d.rssfrequency>0&&window.setInterval(function(){g(d.rssurl,d.type,e)},60*1e3*d.rssfrequency)),b?(f(e,!1),e.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend",function(b){return e.is(b.target)?(f(a(this),!0),void 0):!1})):c(a(this)),d.hoverpause&&e.hover(function(){if(b){var c=a(this).css(d.direction);a(this).css("transition-duration","0s").css(d.direction,c)}else jQuery(this).stop()},function(){jQuery(this).data("settings").moving&&(b?f(a(this),!1):c(e))})})},stop:function(){var c=a(this).data("settings");return c.moving?(c.moving=!1,this.each(function(){if(b){var d=a(this).css(c.direction);a(this).css("transition-duration","0s").css(c.direction,d)}else a(this).stop()})):void 0},cont:function(){var d=a(this).data("settings");return d.moving?void 0:(d.moving=!0,this.each(function(){b?f(a(this),!1):c(a(this))}))},update:function(b,c,d,e){c=c||"reset",d===void 0&&(d=!0),e===void 0&&(e=!1),"string"==typeof b&&(b=a(b));var f=a(this);f.webTicker("stop");var g=a(this).data("settings");if("reset"==c)f.html(b),f.css(g.direction,"0"),h(f);else if("swap"==c){f.children("li").addClass("old");for(var i=0;b.length>i;i++)id=a(b[i]).data("update"),match=f.find('[data-update="'+id+'"]'),1>match.length?d&&(0==f.find(".ticker-spacer:first-child").length&&f.find(".ticker-spacer").length>0?f.children("li.ticker-spacer").before(b[i]):f.append(b[i])):f.find('[data-update="'+id+'"]').replaceWith(b[i]);f.children("li.webticker-init, li.ticker-spacer").removeClass("old"),e&&f.children("li").remove(".old"),stripWidth=0,f.children("li").each(function(){stripWidth+=a(this).outerWidth(!0)}),f.width(stripWidth+200)}f.webTicker("cont")}};a.fn.webTicker=function(b){return i[b]?i[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.webTicker"),void 0):i.init.apply(this,arguments)}})(jQuery);